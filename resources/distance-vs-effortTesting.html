<!DOCTYPE html><!--  Last Published: Wed Sep 04 2024 16:55:19 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="66aacf3482bad2b1ef3fdece" data-wf-site="6650be52b1fb581f8c103315">
<head>
  <meta charset="utf-8">
  <title>Effort and Distance</title>
  <meta content="Effort and Distance" property="og:title">
  <meta content="Effort and Distance" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <link href="../css/normalize.css" rel="stylesheet" type="text/css">
  <link href="../css/webflow.css" rel="stylesheet" type="text/css">
  <link href="../css/jpeg-xl-test.webflow.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["Barlow:100,100italic,200,200italic,300,300italic,regular,italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic","Albert Sans:100,200,300,regular,500,600,700,800,900"]  }});</script>
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="../images/favicon.png" rel="shortcut icon" type="image/x-icon">
  <link href="../images/webclip.png" rel="apple-touch-icon">
  <script src="jxl.min.js"></script>
  <style>
.container {
  display: flex;
  flex-direction: column;
  align-items: center;
}
.top-section {
  display: flex;
  align-items: center;
  gap: 10px;
}
#image-dropdown {
  margin-bottom: 10px;
  padding: 4px 12px;
  border: 1px solid;
  border-radius: 8px;
  border-color: #DCDCDC;
  background-color: #2D2D2D;
  color: #E1E1E1;
}
#slider {
  width: 896px; /* Match the width of .info */
  margin-top: 24px;
}
#image {
  width: 896px;
  height: auto;
  padding-left: 133px;
}
.input[type="range"] {
  background-color: #1f1f1f;
}
.effort-slider-container {
  display: flex;
  flex-direction: column-reverse;
  align-items: center;
  gap: 10px; 
}
.effort-slider-labels {
  display: flex;
  flex-direction: column;
  align-items: center;
  height: 300px; /* Adjust as needed */
  justify-content: space-between;
}
.effort-slider-labels span {
  font-size: 14px; /* Smaller font for the labels */
  margin: 2px 0; /* Adjust spacing between labels */
}
#effort-slider {
  appearance: slider-vertical; 
 /* writing-mode: bt-lr; /* Change the writing mode to place min value at top */
  height: 300px; /* Match the height of the image */
  transform: rotate(180deg); /* Rotate to make largest value at the top */
}
.slider-container {
  width: 896px;  
  margin-top: 10px;
  font-size: 14px; /* Smaller font for the labels */
  display: flex;
  flex-direction: column;
  align-items: center;
}
.slider-labels {
  display: flex;
  justify-content: space-between;
  margin-top: .25rem;
  width: 100%;
  font-family: JetBrains monospace;
  font-size: 12px;
  color: white;
}
.slider-labels span {
  font-size: 14px; /* Smaller font for the labels */
}
.distance-label, .effort-label {
  font-family: Barlow, sans-serif;
  font-size: 20px;
}
.info {
  margin-top: 20px;
  display: flex;
  justify-content: space-between;
  width: 896px;
  text-align: center; /* Center align the content */
}
.info .label {
  color: rgba(112, 112, 112, 1); /* 70% grey */
  font-family: Barlow, sans-serif;
  letter-spacing: 0em;
}
.info span {
  font-family: ui-monospace, 'DejaVu Sans Mono', 'Bitstream Vera Mono', Inconsolata, 'Fira Mono', monospace; /* Set a monospaced font for these elements */
  letter-spacing: -0.065em; /* Tighten the tracking */
}
.no-smoothing {
  image-rendering: pixelated; /* for modern browsers */
}
</style>
  <link href="/css/navbar.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body class="body">
  <nav class="navbar-2-component">
    <input type="checkbox" name="navbar-dropdown" id="navbar-dropdown">
    <div class="navbar-container-menu-top">
      <div class="navbar-2-container">
        <a href="/index.html" aria-current="page" class="navbar_logo-link w-nav-brand w--current"><img width="63"
            loading="lazy" alt="" src="/images/Logo-JPEG-XL-Horizontal-full_colour-white.svg" class="navbar_logo"></a>
        <div class="navbar_menu-items">
          <label for="navbar-dropdown" class="navbar-toggle navbar_link navbar-top w-inline-block material-icons button"></label>
          <div class="navbar-divider-vertical"></div>
          <a href="#" class="navbar_link navbar-top w-inline-block"><img loading="lazy"
              src="/images/Icon-white-Email.svg" alt="" class="navbar-icon-main"></a>
        </div>
      </div>
    </div>
    <div class="container-navbar-dropdown-content">
      <div class="container-navbar-content">
        <div class="navbar-close"><label for="navbar-dropdown" class="navbar-toggle material-icons button"></label></div>
        <div class="navbar-dropdown-content">
          <div class="container-column-vertical">
            <div class="navbar-wrapper-text-section span-with_divider-bottom">
              <div class="text-navbar-menu_section">Resources</div>
            </div>
            <a href="/resources/supported-software.html">Supported Software</a>
            <a href="/resources/battle-of-codecs.html">Battle of the Codecs</a>
            <a href="/resources/faqs.html">FAQs</a>
            <a href="/resources/glossary.html">Glossary</a>
          </div>
          <div class="container-column-vertical">
            <div class="navbar-wrapper-text-section span-with_divider-bottom">
              <div class="text-navbar-menu_section">Tools</div>
            </div>
            <a href="/resources/distance-vs-effort-visualizer.html">Distance vs. Effort Visualizer</a>
            <a href="/resources/jpeg-xl-test-page.html">JPEG XL Test Page</a>
          </div>
          <div class="container-column-vertical">
            <div class="navbar-wrapper-text-section span-with_divider-bottom">
              <div class="text-navbar-menu_section">About</div>
            </div>
            <a href="/about/history.html">History</a>
            <a href="/about/contributors.html">Contributors</a>
            <a href="/about/photo-credits.html">Photo Credits</a>
          </div>
          <div class="container-column-vertical fullspan">
            <div class="container-column-vertical">
              <div class="navbar-wrapper-text-section span-with_divider-bottom">
                <div class="text-navbar-menu_section">Media</div>
              </div>
              <a href="/media/newsroom.html">Newsroom</a>
            </div>
            <div class="container-column-vertical">
              <div class="w-layout-grid navbar-social-links">
                <a href="/https://discord.gg/DqkQgDRTFu" target="_blank" class="social-link w-inline-block"><img
                    src="/images/Icon-social-discord-black.svg" loading="lazy" alt="" class="icon-social"></a>
                <a href="/https://www.reddit.com/r/jpegxl" target="_blank" class="social-link w-inline-block"><img
                    src="/images/Icon-social-reddit-black.svg" loading="lazy" alt="" class="icon-social"></a>
                <a href="/https://x.com/jpegxl" target="_blank" class="social-link w-inline-block"><img
                    src="/images/Icon-social-x-twitter-black.svg" loading="lazy" alt="" class="icon-social"></a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </nav>
  <div class="page-wrapper">
    <section class="section-content-wrapper hero-fullspan-graphic gradient-bottom">
      <div class="container-content-vflex width-page-max centered">
        <div class="wrapper-text color-gradient">
          <h1 class="display-xl-bold fill-gradient">Distance vs Effort</h1>
        </div>
        <div class="wrapper-text width-small">
          <h2 class="text-l-medium large">Use this tool  to compare changes in image quality with different Distance (quality) and Effort (encoding speed) settings for JPEG XL’s reference encoder, libjxl.</h2>
        </div>
      </div>
    </section>
    <div class="section-wave-animated">
      <section class="container-content-vflex">
        <div class="container-wave-animated">
          <div class="wrapper-content-wave centered align-middle height-cropped-width-full"><img src="../images/Ripple-Line2x-50.0s-2560px-371px.svg" loading="lazy" alt="" class="image-wave-2560"><img src="../images/Ripple-Line2x-50.0s-1440px-300px.svg" loading="lazy" alt="" class="image-wave-1440"></div>
        </div>
      </section>
    </div>
    <div class="section-content-wrapper height-100 centered padding-top_bottom">
      <main class="container-content-vflex width-page-max centered">
        <div class="container-content-vflex centered">
          <div class="wrapper-content centered">
            <div class="code-distance_vs_effort w-embed">
              <div class="container">
                <select id="image-dropdown"></select>
                <div style="display: flex; align-items: center;">
                  <img id="image" src="" alt="Image" class="no-smoothing">
                  <div id="vertical-slider-container" class="effort-slider-container">
                    <label for="effort-slider" class="effort-label">Effort:</label>
                    <input type="range" id="effort-slider" min="0" value="0" step="1">
                  </div>
                  <div class="effort-slider-labels" id="effort-slider-labels"></div>
                </div>
                <div class="slider-container">
                  <label for="slider" class="distance-label">Distance:</label>
                  <input type="range" id="slider" min="0" value="0" step="1">
                  <div class="slider-labels" id="slider-labels"></div>
                </div>
                <div class="info">
                  <p><span class="label">Size:</span> <span id="size"></span> bytes</p>
                  <p><span class="label">BPP:</span> <span id="bpp"></span></p>
                  <p><span class="label">SSIMU2:</span> <span id="ssim"></span></p>
                  <p><span class="label">Encoding Time:</span> <span id="compression-time"></span> s</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>
    <div class="footer_component blend-teal">
      <div class="padding-global">
        <div class="container-large">
          <div class="padding-section-medium">
            <div class="wrapper-content-hflex">
              <a href="../index.html" class="navbar_logo-link w-nav-brand"><img width="63" loading="lazy" alt="" src="../images/Logo-JPEG-XL-Horizontal-full_colour-white.svg" class="navbar_logo"></a>
              <div class="w-layout-grid footer_bottom-wrapper">
                <div id="w-node-_8e9aaa5d-c4ff-899a-79da-79764703422e-4703421c" class="w-layout-grid footer_social-list">
                  <a href="https://discord.gg/DqkQgDRTFu" target="_blank" class="social-link w-inline-block"><img src="../images/Icon-social-discord-black.svg" loading="lazy" alt="" class="icon-social add-glow"></a>
                  <a href="https://www.reddit.com/r/jpegxl" target="_blank" class="social-link w-inline-block"><img src="../images/Icon-social-reddit-black.svg" loading="lazy" alt="" class="icon-social"></a>
                  <a id="w-node-_24fb526d-e2ce-98f2-0ed9-7b6156e1ac26-4703421c" href="https://x.com/jpegxl" target="_blank" class="social-link w-inline-block"><img src="../images/Icon-social-x-twitter-black.svg" loading="lazy" alt="" class="icon-social"></a>
                </div>
                <div id="w-node-a89a5031-0ff7-675b-f7d6-29d42dd985eb-4703421c" class="container-content-vflex">
                  <div id="w-node-fedcfc71-bc17-af3f-285c-68c798bcef4e-4703421c" class="wrapper-text">
                    <div id="w-node-_8e9aaa5d-c4ff-899a-79da-79764703423d-4703421c" class="footer_credit-text">© 2024 JPEG XL and the JPEG XL Community. </div>
                  </div>
                  <div id="w-node-c0d3ad9f-7ad0-819a-9ca1-7b24d38a2a6f-4703421c" class="footer-cookies-links-container">
                    <a href="#" class="footer_legal-link">Add to the site here.</a>
                    <a href="#" class="footer_legal-link">Cookies Settings</a>
                    <a href="#" class="footer_legal-link">Terms of Service</a>
                    <a href="#" class="footer_legal-link">Privacy Policy</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=6650be52b1fb581f8c103315" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script>
document.addEventListener('DOMContentLoaded', () => {
  const imagesDataPath = './DistanceVSEffort_ImageList.json'; // Path to the JSON file containing image data
  fetch(imagesDataPath)
    .then(response => {
      if (!response.ok) {
        throw new Error('Network response was not ok');
      }
      return response.json();
    })
    .then(data => {
      initializeApp(data);
    })
    .catch(error => {
      console.error('Error fetching data:', error);
      alert('Failed to load image data. Please try again later.');
    });
  function initializeApp(images) {
    const imageDropdown = document.getElementById('image-dropdown');
    const uniqueImageNames = [...new Set(images.map(image => image.Name))];
    const imageElement = document.getElementById('image');
    const slider = document.getElementById('slider');
    const effortSlider = document.getElementById('effort-slider');
    const sizeSpan = document.getElementById('size');
    const bppSpan = document.getElementById('bpp');
    const ssimSpan = document.getElementById('ssim');
    const compressionTimeSpan = document.getElementById('compression-time');
    const sliderLabels = document.getElementById('slider-labels');
    const effortSliderLabels = document.getElementById('effort-slider-labels');
    const distanceLabel = document.querySelector('.distance-label');
    const effortLabel = document.querySelector('.effort-label');
    let currentImageIndex = 0;
    let currentEffortIndex = 0;
    let previousDistance = 0; // Variable to store the previous distance value
    uniqueImageNames.forEach(name => {
      const option = document.createElement('option');
      option.value = name;
      option.textContent = name;
      imageDropdown.appendChild(option);
    });
    imageDropdown.addEventListener('change', handleImageChange);
    effortSlider.addEventListener('input', handleEffortChange);
    slider.addEventListener('input', handleDistanceChange);
    function handleImageChange() {
      const selectedImageName = imageDropdown.value;
      currentEffortIndex = 0; // Reset effort slider position
      const efforts = initializeEffortSlider(selectedImageName);
      updateSlidersAndImage(selectedImageName, efforts[0]);
    }
    function handleEffortChange() {
      currentEffortIndex = parseInt(effortSlider.value, 10);
      const selectedImageName = imageDropdown.value;
      const efforts = initializeEffortSlider(selectedImageName);
      const { distances } = initializeDistanceSlider(selectedImageName, efforts[currentEffortIndex]);
      // Find the closest matching distance to the previous distance
      const closestDistanceIndex = findClosestDistanceIndex(distances, previousDistance);
      currentImageIndex = closestDistanceIndex;
      slider.value = currentImageIndex;
      updateImageAndInfo(currentImageIndex, distances, images.filter(image => image.Name === selectedImageName && image.Effort === efforts[currentEffortIndex]));
      effortLabel.textContent = `Effort: ${efforts[currentEffortIndex]}`;
      updateDistanceLabel(distances[currentImageIndex]);
    }
    function handleDistanceChange() {
      currentImageIndex = parseInt(slider.value, 10);
      const selectedImageName = imageDropdown.value;
      const efforts = initializeEffortSlider(selectedImageName);
      const { distances, filteredImages } = initializeDistanceSlider(selectedImageName, efforts[currentEffortIndex]);
      previousDistance = distances[currentImageIndex]; // Store the current distance
      updateImageAndInfo(currentImageIndex, distances, filteredImages);
      updateDistanceLabel(distances[currentImageIndex]);
    }
    function initializeEffortSlider(imageName) {
      const efforts = [...new Set(images.filter(image => image.Name === imageName).map(image => image.Effort))].sort((a, b) => b - a);
      effortSlider.min = 0;
      effortSlider.max = efforts.length - 1;
      effortSliderLabels.innerHTML = '';
      efforts.forEach(effort => {
        const label = document.createElement('span');
        label.textContent = effort;
        effortSliderLabels.appendChild(label);
      });
      effortLabel.textContent = `Effort: ${efforts[currentEffortIndex]}`;
      return efforts;
    }
    function initializeDistanceSlider(imageName, effort) {
      const filteredImages = images.filter(image => image.Name === imageName && image.Effort === effort);
      const distances = [...new Set(filteredImages.map(image => image.Quality))].sort((a, b) => a - b);
      slider.min = 0;
      slider.max = distances.length - 1;
      sliderLabels.innerHTML = '';
      distances.forEach((distance, index) => {
        if (index % Math.ceil(distances.length / 10) === 0) {
          const label = document.createElement('span');
          label.textContent = distance.toFixed(1);
          sliderLabels.appendChild(label);
        }
      });
      updateDistanceLabel(distances[currentImageIndex]);
      return { distances, filteredImages };
    }
    function updateSlidersAndImage(imageName, effort) {
      const { distances, filteredImages } = initializeDistanceSlider(imageName, effort);
      updateImageAndInfo(currentImageIndex, distances, filteredImages);
    }
    function updateImageAndInfo(imageIndex, distances, filteredImages) {
      const distance = distances[imageIndex];
      const effort = filteredImages[0].Effort;
      const imageData = filteredImages.find(image => image.Quality === distance && image.Effort === effort);
      imageElement.src = `DistanceVSEffort_Images/${imageData.FileName}`;
      imageElement.alt = `Name: ${imageData.Name} Distance: ${distance} Effort: ${effort}`;
      sizeSpan.textContent = imageData.Size.toLocaleString(); // Format size with commas
      bppSpan.textContent = parseFloat(imageData.BPP).toFixed(2); // Limit BPP to 2 decimals
      ssimSpan.textContent = parseFloat(imageData.SSIMU2).toFixed(2); // Limit SSIMU2 to 2 decimals
      const compressionTime = (imageData.Pixels / 1000000) / imageData["E-Speed"];
      compressionTimeSpan.textContent = compressionTime.toFixed(3); // Limit to 3 decimals
    }
    function findClosestDistanceIndex(distances, previousDistance) {
      let closestIndex = 0;
      let closestDifference = Math.abs(distances[0] - previousDistance);
      distances.forEach((distance, index) => {
        const difference = Math.abs(distance - previousDistance);
        if (difference < closestDifference) {
          closestIndex = index;
          closestDifference = difference;
        }
      });
      return closestIndex;
    }
    function updateDistanceLabel(distance) {
      if (distance === 0) {
        distanceLabel.textContent = `Distance: ${distance.toFixed(1)} (mathematically lossless)`;
      } else if (distance <= 1) {
        distanceLabel.textContent = `Distance: ${distance.toFixed(1)} (visually lossless)`;
      } else {
        distanceLabel.textContent = `Distance: ${distance.toFixed(1)}`;
      }
    }
    handleImageChange(); // Initialize with the first image
  }
});
</script>
</body>
</html>